language: node_js
node_js:
  - 0.8
rvm:
  - 1.9.3
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "bundle install"
script:
  - "rake"
  - "npm test"
  - "git config --global user.name 'Olivier Hory'; git config --global user.email olivier.hory@gmail.com; git remote set-url origin git@github.com:ohory/tetra.git; ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no github.com"
  - "git add dist/*.min.js; git commit -m 'auto-generated tetra packages'; git push"